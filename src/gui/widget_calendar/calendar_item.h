/// $Header
/// ============================================================================
///		Author		: M. Ivanchenko
///		Date create	: 18-03-2013
///		Date update	: 10-12-2014
///		Comment		:
/// ============================================================================
#ifndef __CALENDAR_ITEM_H__
#define __CALENDAR_ITEM_H__

#include <QDate>
#include <QDebug>

#include "calendar_item_painter.h"

namespace rele_auto
{

namespace employee_vacation
{
/// ############################################################################
///			class calendar_item
/// ############################################################################
    class calendar_item
	{
    public:
        enum calendar_item_type
        {
            nothing,
            header_month,
            header_day,
            day,
            holiday_day,
            vacation_day
        };

    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item( const calendar_item &rhs );

	public:
        /// --------------------------------------------------------------------
        calendar_item( )
        {
        }

        /// --------------------------------------------------------------------
        calendar_item( const QDate& dt ) :
            _dt( dt )
        {
        }

        /// --------------------------------------------------------------------
        virtual ~calendar_item( )
        {
        }

    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================

	public:
        /// --------------------------------------------------------------------
        virtual calendar_item_painter* painter( ) const = 0;

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
	public:
        /// --------------------------------------------------------------------
        virtual const QString text( ) const
        {
            if( !this->_dt.isValid( ) )
            {
                return "";
            }
            return this->_dt.toString( "dd" );
        }

        /// --------------------------------------------------------------------
        const QDate& date( ) const { return this->_dt; }
        void date( const QDate& dt ) { this->_dt = dt; }

        /// --------------------------------------------------------------------
        virtual calendar_item_type type( ) const = 0;

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item& operator=( const calendar_item &rhs );

	public:

    /// ========================================================================
    ///			FIELDS
    /// ========================================================================
    private:
        QDate   _dt;

    };//class calendar_item

/// ############################################################################
///			class calendar_item_nothing
/// ############################################################################

    calendar_item_painter_nothing * the_painter_nothing( );

    class calendar_item_nothing : public calendar_item
    {
    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_nothing( const calendar_item_nothing &rhs );

    public:
        /// --------------------------------------------------------------------
        calendar_item_nothing( ) :
            calendar_item( )
        {
        }

    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_painter* painter( ) const
        {
            return the_painter_nothing( );
        }

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_type type( ) const
        { return nothing; }

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_nothing& operator=( const calendar_item_nothing &rhs );

    };//calendar_item_nothing

/// ############################################################################

/// ############################################################################
///			class calendar_item_day
/// ############################################################################

    calendar_item_painter_day* the_painter_day( );

    class calendar_item_day : public calendar_item
    {
    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_day( const calendar_item_day &rhs );

    public:
        /// --------------------------------------------------------------------
        calendar_item_day( ) :
            calendar_item( )
        {
        }

        /// --------------------------------------------------------------------
        calendar_item_day( const QDate &dt ) :
            calendar_item( dt )
        {
        }

    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_painter* painter( ) const
        {
            return the_painter_day( );
        }

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_type type( ) const
        { return day; }

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_day& operator=( const calendar_item_day &rhs );

    };//calendar_item_day

/// ############################################################################/// ----------------------------------------------------------------------------

/// ############################################################################
///			class calendar_item_holiday
/// ############################################################################

    calendar_item_painter_holiday* the_painter_holiday( );

    class calendar_item_holiday : public calendar_item
    {
    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_holiday( const calendar_item_holiday &rhs );

    public:
        /// --------------------------------------------------------------------
        calendar_item_holiday( ) :
            calendar_item( )
        {
        }

        /// --------------------------------------------------------------------
        calendar_item_holiday( const QDate &dt ) :
            calendar_item( dt )
        {
        }

    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_painter* painter( ) const
        {
            return the_painter_holiday( );
        }

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_type type( ) const
        { return holiday_day; }

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_holiday& operator=( const calendar_item_holiday &rhs );

    };//calendar_item_holiday

/// ############################################################################

/// ############################################################################
///			class calendar_item_vacation
/// ############################################################################

    calendar_item_painter_vacation* the_painter_vacation( );

    class calendar_item_vacation : public calendar_item
    {
    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_vacation( const calendar_item_vacation &rhs );

    public:
        /// --------------------------------------------------------------------
        calendar_item_vacation( ) :
            calendar_item( )
        {
        }

        /// --------------------------------------------------------------------
        calendar_item_vacation( const QDate &dt ) :
            calendar_item( dt )
        {
        }
    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_painter* painter( ) const
        {
            return the_painter_vacation( );
        }

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_type type( ) const
        { return vacation_day; }

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_vacation& operator=( const calendar_item_vacation &rhs );

    };//calendar_item_vacation

/// ############################################################################

/// ############################################################################
///			class calendar_item_header_month
/// ############################################################################

    calendar_item_painter_header_month* the_painter_header_month( );

    class calendar_item_header_month : public calendar_item
    {
    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_header_month( const calendar_item_header_month &rhs );

    public:
        /// --------------------------------------------------------------------
        calendar_item_header_month( ) :
            calendar_item( )
        {
        }

        /// --------------------------------------------------------------------
        calendar_item_header_month( const QDate &dt ) :
            calendar_item( dt )
        {
        }

    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_painter* painter( ) const
        {
            return the_painter_header_month( );
        }
        /// --------------------------------------------------------------------
        virtual const QString text( ) const;

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_type type( ) const
        { return header_month; }

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_header_month& operator=( const calendar_item_header_month &rhs );

    /// ========================================================================
    ///		FIELDS
    /// ========================================================================
    private:
        static QString _month_long_names[];

    };//calendar_item_header_month

/// ############################################################################

/// ############################################################################
///			class calendar_item_header_day
/// ############################################################################

    calendar_item_painter_header_day* the_painter_header_day( );

    class calendar_item_header_day : public calendar_item
    {
    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_header_day( const calendar_item_header_day &rhs );

    public:
        /// --------------------------------------------------------------------
        calendar_item_header_day( ) :
            calendar_item( )
        {
        }

        /// --------------------------------------------------------------------
        calendar_item_header_day( const QDate &dt ) :
            calendar_item( dt )
        {
        }
    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_painter* painter( ) const
        {
            return the_painter_header_day( );
        }

        /// --------------------------------------------------------------------
        virtual const QString text( ) const;

    /// ========================================================================
    ///		PROPERTIES
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        virtual calendar_item_type type( ) const
        { return header_day; }

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_header_day& operator=( const calendar_item_header_day &rhs );

    /// ========================================================================
    ///		FIELDS
    /// ========================================================================
    private:
        static QString _day_short_names[];

    };//calendar_item_header_day

/// ############################################################################
///			class calendar_item_creator
/// ############################################################################
    class calendar_item_creator
    {
    /// ========================================================================
    ///		CONSTRUCTORS/DESTRUCTOR
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_creator( const calendar_item_creator &rhs );

    /// ========================================================================
    ///		FUNCTIONS
    /// ========================================================================
    public:
        /// --------------------------------------------------------------------
        static calendar_item* create( const QDate &dt );

    /// ========================================================================
    ///		OPERATORS
    /// ========================================================================
    private:
        /// --------------------------------------------------------------------
        calendar_item_creator& operator=( const calendar_item_creator &rhs );

    };//calendar_item_creator

/// ############################################################################

/// ----------------------------------------------------------------------------
}//namespace employee_vacation

}//namespace rele_auto

#endif // __CALENDAR_ITEM_H__
